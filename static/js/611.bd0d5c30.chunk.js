"use strict";(self.webpackChunkmatols_website=self.webpackChunkmatols_website||[]).push([[611],{6611:(e,s,t)=>{t.r(s),t.d(s,{default:()=>u});var l=t(2907),r=t(3216),a=t(6007),d=t(5624),i=t(7613),o=t(2820),n=t(7656),c=t(5043),x=t(2780),m=t(4694),p=t(4732),h=t(579);function u(){const[e,s]=(0,c.useState)(!1),t=(0,l.useQueryClient)(),{id:u}=(0,r.g)(),{data:j,error:b,isError:v,isLoading:y}=(0,l.useQuery)({queryKey:["fetched-booking"],queryFn:()=>(0,a.SH)(u),onSuccess:e=>{}}),{isLoading:g,mutateAsync:N,isError:f,error:k}=(0,l.useMutation)("cancel-booking",{mutationFn:a.Du,onSuccess:e=>{s((e=>!1)),t.invalidateQueries(["fetched-booking"])},onMutate:e=>{s((e=>!0))},onError:e=>{s((e=>!1))}});return y?(0,h.jsx)(d.q,{secondary_text:"loading booking"}):v?(0,h.jsx)(i.$p,{secondaryText:"".concat(b.response.data)}):(0,h.jsx)(p.q,{children:(0,h.jsxs)("main",{className:"max-w-xl mx-auto p-6 my-6 text-black bg-white",children:[(0,h.jsx)("div",{className:"rounded-md p-6 shadow-sm border border-gray-200",children:(0,h.jsxs)("h2",{className:(0,m.cn)("text-start text-black px-2 font-extrabold text-3xl",{"text-red-500":j.booking_canceled,"text-gray-200":j.booking_completed}),children:["Invoice ",u,(0,h.jsx)("p",{className:"text-sm font-normal text-slate-800 pt-2",children:"Thank you for trusting Matols Logistic Services with your personal information."})]})}),(0,h.jsx)("div",{className:"my-4"}),(0,h.jsx)(n.Y,{booking:j,children:(0,h.jsxs)("div",{children:[f&&(0,h.jsx)(i.$p,{className:"mb-4",secondaryText:"".concat(k.response.data.message," ").concat(k.message)}),(0,h.jsxs)("div",{className:"flex flex-row justify-end gap-4 mt-4",children:[(0,h.jsx)(o.$,{onClick:async()=>{try{await N({booking_canceled:!0,id:j.id})}catch(e){}},disabled:j.booking_canceled||j.booking_completed||e,className:"w-auto bg-red-500 text-white hover:bg-red-600",children:g?(0,h.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:(0,h.jsx)(x.LW,{visible:!0,width:"40",height:"20",color:"#000"})}):"Cancel"}),(0,h.jsx)(o.$,{onClick:()=>{window.location.href="/update/booking/".concat(j.id,"/")},disabled:j.booking_canceled||j.booking_completed||e,className:"w-auto",children:"Update"})]})]})},j.id)]})})}},7613:(e,s,t)=>{t.d(s,{$p:()=>i,C9:()=>a,Z0:()=>d});t(5043);var l=t(4694),r=t(579);function a(e){let{secondaryText:s,className:t,children:a,...d}=e;return(0,r.jsx)("div",{...d,className:(0,l.cn)("bg-green-100 border-t-4 border-green-500 rounded-b-md text-green-900 px-4 py-2",t),role:"alert",children:(0,r.jsx)("div",{className:"flex text-wrap break-words",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-bold",children:"Yey ! all set"}),(0,r.jsx)("p",{className:"text-sm text-wrap break-words",children:s||"Welcome to Matols Logistics services"})]})})})}function d(e){let{primaryText:s,secondaryText:t,className:a,children:d,...i}=e;return(0,r.jsx)("div",{...i,className:(0,l.cn)("bg-blue-100 border-t-4 border-blue-500 rounded-b-md text-blue-700 px-4 py-2",a),role:"alert",children:(0,r.jsx)("div",{className:"flex text-wrap break-words",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-bold",children:s}),(0,r.jsx)("p",{className:"text-sm text-wrap break-words",children:t||"Welcome to Matols Logistics services"})]})})})}function i(e){let{secondaryText:s,className:t,children:a,...d}=e;return(0,r.jsx)("div",{...d,className:(0,l.cn)("bg-red-100 border-t-4 border-red-500 rounded-b-md text-red-900 px-4 py-2",t),role:"alert",children:(0,r.jsx)("div",{className:"flex",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-bold",children:"Oops ! Error"}),(0,r.jsx)("p",{className:"text-sm",children:s||"An error occured"})]})})})}},7656:(e,s,t)=>{t.d(s,{Y:()=>p});var l=t(4694),r=t(5394),a=t(579);function d(e){let{pickup_dropoff_route:s}=e;return(0,a.jsx)("div",{className:"mb-1 border border-gray-200 p-2 rounded-md",children:(0,a.jsxs)("div",{className:"flex flex-row items-start gap-1",children:[(0,a.jsx)("div",{children:(0,a.jsx)(r.eVO,{size:18,className:"text-gray-400"})}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsxs)("p",{className:"text-sm font-bold",children:[s.primary_text,","," ",(0,a.jsx)("span",{className:"font-normal",children:s.secondary_text})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-400",children:[String(s.route_detail).length>0&&(0,a.jsx)("span",{className:"font-bold",children:"Message:"})," ",s.route_detail]})]})]})})}var i=t(1462),o=t(4550),n=t(6178),c=t.n(n),x=t(607);function m(e){let{booking:s}=e;return(0,a.jsxs)("table",{className:"table-auto border border-gray-200 mt-4 w-full border-separate border-spacing-0 rounded-md shadow-sm",children:[(0,a.jsx)("thead",{className:(0,l.cn)("bg-yellow-400",{"bg-red-500":null===s||void 0===s?void 0:s.booking_canceled,"bg-gray-200":null===s||void 0===s?void 0:s.booking_completed}),children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"rounded-ss-md text-start px-4 py-3",children:"Description"}),(0,a.jsx)("th",{className:"rounded-tr-md text-start px-4 py-3",children:"Details"})]})}),(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:"Booking date"}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:c()(new Date(null===s||void 0===s?void 0:s.booking_date)).format("YYYY-MMM-DD")})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:"Booking time"}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:c()(new Date("".concat(null===s||void 0===s?void 0:s.booking_date," ").concat(null===s||void 0===s?void 0:s.booking_time))).format("HH:mm")})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:"Vehicle type"}),(0,a.jsxs)("td",{className:"px-4 py-3 text-sm",children:[null===s||void 0===s?void 0:s.vehicle_type," Ton"]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:"Helpers"}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:null===s||void 0===s?void 0:s.helpers})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:"Floors"}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:null===s||void 0===s?void 0:s.floors})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:"Payment option"}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:null===s||void 0===s?void 0:s.payment_option})]}),(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:2,className:"px-4 py-3 text-sm border-t",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"py-2 w-full flex justify-center",children:(0,a.jsx)("span",{className:"text-sm font-extrabold text-slate-800",children:"PICK UP AND DROPOFF LOCATIONS"})}),(0,a.jsx)("div",{className:"mt-1",children:null===s||void 0===s?void 0:s.pickup_dropoff_routes.map(((e,s)=>(0,a.jsx)(d,{pickup_dropoff_route:e},s)))})]})})}),(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:"px-4 py-3 text-sm border-t flex flex-row justify-start items-center gap-1",children:["Base price"," ",(0,a.jsx)(o.m_,{content:x.Fk,placement:"top",trigger:"click",children:(0,a.jsx)(i.u7w,{className:"text-yellow-500 hover:opacity-75"})})]}),(0,a.jsxs)("td",{className:"px-4 py-3 text-sm border-t",children:["R ",null===s||void 0===s?void 0:s.base_amount," "]})]}),(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsxs)("td",{className:"px-4 py-3 text-sm flex flex-row justify-start items-center gap-1",children:["Mid month discount"," ",(0,a.jsx)(o.m_,{content:x.Sv,placement:"top",trigger:"click",children:(0,a.jsx)(i.u7w,{className:"text-yellow-500 hover:opacity-75"})})]}),(0,a.jsxs)("td",{className:"px-4 py-3 text-sm text-red-500",children:["R -",null===s||void 0===s?void 0:s.mid_month_discount," "]})]}),(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsxs)("td",{className:"px-4 py-3 text-sm flex flex-row justify-start items-center gap-1",children:["Loyal discount",(0,a.jsx)(o.m_,{className:"bg-slate-800",content:x.h1,placement:"top",trigger:"click",arrow:!0,children:(0,a.jsx)(i.u7w,{className:"text-yellow-500 hover:opacity-75"})})]}),(0,a.jsxs)("td",{className:"px-4 py-3 text-sm text-red-500 ",children:["R -",null===s||void 0===s?void 0:s.loyal_customer_discount," "]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:"px-4 py-3 text-lg border-t font-extrabold flex flex-row justify-start items-center gap-2",children:["Balance due",(0,a.jsx)(o.m_,{content:x.S2,placement:"top",trigger:"click",children:(0,a.jsx)(i.u7w,{className:"text-yellow-500 hover:opacity-75 text-sm"})})]}),(0,a.jsxs)("td",{className:"px-4 py-3 text-lg border-t font-extrabold",children:["R ",null===s||void 0===s?void 0:s.amount_due_customer," "]})]})]})]})}function p(e){let{booking:s,...t}=e;return(0,a.jsxs)("div",{className:"rounded-md pb-6",children:[(0,a.jsxs)("h2",{className:(0,l.cn)("text-start text-slate-800 px-2 font-extrabold text-lg",{"text-red-500":null===s||void 0===s?void 0:s.booking_canceled,"text-gray-200":null===s||void 0===s?void 0:s.booking_completed}),children:[(null===s||void 0===s?void 0:s.id)>0&&(0,a.jsx)("div",{className:"pt-2"}),(null===s||void 0===s?void 0:s.id)>0&&(0,a.jsxs)("span",{children:["Invoice ",null===s||void 0===s?void 0:s.id]}),(null===s||void 0===s?void 0:s.booking_canceled)&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:"Booking canceled"}),(null===s||void 0===s?void 0:s.booking_completed)&&(0,a.jsx)("p",{className:"text-gray-200 text-sm",children:"Booking Completed"})]}),(0,a.jsx)(m,{booking:s}),t.children]})}},4732:(e,s,t)=>{t.d(s,{q:()=>i});var l=t(2122);const r={hidden:{opacity:0},visible:{opacity:1},exit:{opacity:0}};var a=t(607),d=t(579);function i(e){let{children:s,...t}=e;return(0,d.jsx)(l.P.section,{variants:r,animate:"visible",initial:"hidden",exit:"exit",transition:{duration:a.KD,delay:a.XP},children:s})}},5624:(e,s,t)=>{t.d(s,{q:()=>a});var l=t(2780),r=t(579);function a(e){let{secondary_text:s}=e;return(0,r.jsxs)("div",{className:"m-auto max-w-4xl flex flex-col justify-center items-center py-48 my-2 gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center gap-4",children:[(0,r.jsx)("span",{className:"text-3xl font-bold",children:"Please be patient"}),(0,r.jsx)("span",{className:"text-xl",children:s})]}),(0,r.jsx)(l.LW,{visible:!0,width:"40",height:"20",color:"#000"})]})}}}]);
//# sourceMappingURL=611.bd0d5c30.chunk.js.map