"use strict";(self.webpackChunkmatols_website=self.webpackChunkmatols_website||[]).push([[507],{6507:(e,t,s)=>{s.r(t),s.d(t,{default:()=>g});var r=s(2907),l=s(6007),o=s(6600),a=s(3234),i=s(7613),n=s(5043),c=s(5624),d=s(3672),x=s(2820),m=s(2780),p=s(4703),u=s(7257),h=s(4732),j=s(579);function g(){const[e,t]=(0,n.useState)(!1),{set:s}=(0,u.Z)((()=>window.location.href=p.C.bookings),5e3),{_:g,getCreateBookingObj:v}=(0,o.X)(a.r.create_booking),{isLoading:y,isSuccess:b,mutateAsync:f,isError:N,error:k}=(0,r.useMutation)({mutationKey:"book-booking",mutationFn:l.Gq,onError:e=>{t(401===e.response.status)},onSuccess:e=>{s()}}),{data:w,isLoading:_,mutate:C,isError:T,error:B}=(0,r.useMutation)({mutationKey:"compute-quote",mutationFn:l.aL});(0,n.useEffect)((()=>{const e=v();e&&C(e)}),[]);return T?(0,j.jsx)(i.$,{secondaryText:"".concat(B.response.data)}):_?(0,j.jsx)(c.q,{secondary_text:"Loading Quote"}):(0,j.jsx)(h.q,{children:(0,j.jsxs)("main",{className:"max-w-xl mx-auto my-4 p-6 text-black bg-white",children:[(0,j.jsxs)("h2",{className:"text-start text-black pb-6 font-extrabold text-3xl",children:["Complete your booking",(0,j.jsx)("p",{className:"text-sm font-normal text-slate-600 pt-2",children:"Thank you for choosing Matols logistics services as your go to service provider."})]}),(0,j.jsx)(d.Y,{booking:w}),(0,j.jsxs)("div",{className:"flex flex-col gap-4 justify-end items-end",children:[e&&(0,j.jsxs)("div",{className:"border-t-4 border-blue-600 bg-blue-200 px-4\r py-2 w-full flex flex-col rounded-b-md",children:[(0,j.jsx)("p",{className:"font-bold",children:"Info ! Error 401"}),(0,j.jsx)("p",{className:"text-sm",children:"To complete a booking with Matols Logistics Services you need to be signed in. Navigate to the sign in page and sign in, other wise complete the registration process and continue making your booking."})]}),N&&(0,j.jsx)(i.$,{className:"w-full",secondaryText:"".concat(k.response.data.message," ").concat(k.message)}),b&&(0,j.jsx)(i.C,{className:"w-full",secondaryText:"Your booking was successfully created"}),(0,j.jsx)("div",{children:(0,j.jsx)(x.$,{onClick:async()=>{try{const e=v();e&&await f(e)}catch(e){}},className:"w-auto  hover:opacity-75",children:y?(0,j.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:(0,j.jsx)(m.LW,{visible:!0,width:"40",height:"20",color:"#000"})}):"Book"})})]}),(0,j.jsx)("div",{className:"mb-20"})]})})}},7613:(e,t,s)=>{s.d(t,{$:()=>a,C:()=>o});s(5043);var r=s(4694),l=s(579);function o(e){let{secondaryText:t,className:s,children:o,...a}=e;return(0,l.jsx)("div",{...a,className:(0,r.cn)("bg-green-100 border-t-4 border-green-500 rounded-b-md text-green-900 px-4 py-2",s),role:"alert",children:(0,l.jsx)("div",{className:"flex text-wrap break-words",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-bold",children:"Yey ! all set"}),(0,l.jsx)("p",{className:"text-sm text-wrap break-words",children:t||"Welcome to Matols Logistics services"})]})})})}function a(e){let{secondaryText:t,className:s,children:o,...a}=e;return(0,l.jsx)("div",{...a,className:(0,r.cn)("bg-red-100 border-t-4 border-red-500 rounded-b-md text-red-900 px-4 py-2",s),role:"alert",children:(0,l.jsx)("div",{className:"flex",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-bold",children:"Oops ! Error"}),(0,l.jsx)("p",{className:"text-sm",children:t||"An error occured"})]})})})}},3672:(e,t,s)=>{s.d(t,{Y:()=>x});var r=s(4694),l=s(5394),o=s(579);function a(e){let{pickup_dropoff_route:t}=e;return(0,o.jsx)("div",{className:"mb-1 border border-gray-200 p-2 rounded-md",children:(0,o.jsxs)("div",{className:"flex flex-row items-start gap-1",children:[(0,o.jsx)("div",{children:(0,o.jsx)(l.eVO,{size:18,className:"text-gray-400"})}),(0,o.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,o.jsxs)("p",{className:"text-sm font-bold",children:[t.primary_text,","," ",(0,o.jsx)("span",{className:"font-normal",children:t.secondary_text})]}),(0,o.jsxs)("p",{className:"text-xs text-gray-400",children:[String(t.route_detail).length>0&&(0,o.jsx)("span",{className:"font-bold",children:"Message:"})," ",t.route_detail]})]})]})})}var i=s(1462),n=s(4550),c=s(607);Intl.DateTimeFormat("en-Za",{hour:"numeric",minute:"numeric",timeZone:"Africa/Harare",timeZoneName:"short"}),Intl.DateTimeFormat("en-ZA",{weekdays:"long",year:"numeric",month:"long",day:"numeric"});function d(e){let{booking:t}=e;return(0,o.jsxs)("table",{className:"table-auto border border-gray-200 mt-4 w-full border-separate border-spacing-0 rounded-md shadow-sm",children:[(0,o.jsx)("thead",{className:(0,r.cn)("bg-yellow-400",{"bg-red-500":null===t||void 0===t?void 0:t.booking_canceled,"bg-gray-200":null===t||void 0===t?void 0:t.booking_completed}),children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"rounded-ss-md text-start px-4 py-3",children:"Description"}),(0,o.jsx)("th",{className:"rounded-tr-md text-start px-4 py-3",children:"Details"})]})}),(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"px-4 py-3 text-sm",children:"Booking date"}),(0,o.jsx)("td",{className:"px-4 py-3 text-sm",children:null===t||void 0===t?void 0:t.booking_date})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"px-4 py-3 text-sm",children:"Booking time"}),(0,o.jsx)("td",{className:"px-4 py-3 text-sm",children:null===t||void 0===t?void 0:t.booking_time})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"px-4 py-3 text-sm",children:"Vehicle type"}),(0,o.jsxs)("td",{className:"px-4 py-3 text-sm",children:[null===t||void 0===t?void 0:t.vehicle_type," Ton"]})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"px-4 py-3 text-sm",children:"Helpers"}),(0,o.jsx)("td",{className:"px-4 py-3 text-sm",children:null===t||void 0===t?void 0:t.helpers})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"px-4 py-3 text-sm",children:"Floors"}),(0,o.jsx)("td",{className:"px-4 py-3 text-sm",children:null===t||void 0===t?void 0:t.floors})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"px-4 py-3 text-sm",children:"Payment option"}),(0,o.jsx)("td",{className:"px-4 py-3 text-sm",children:null===t||void 0===t?void 0:t.payment_option})]}),(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:2,className:"px-4 py-3 text-sm border-t",children:(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"py-2 w-full flex justify-center",children:(0,o.jsx)("span",{className:"text-sm font-extrabold text-slate-800",children:"PICK UP AND DROPOFF LOCATIONS"})}),(0,o.jsx)("div",{className:"mt-1",children:null===t||void 0===t?void 0:t.pickup_dropoff_routes.map(((e,t)=>(0,o.jsx)(a,{pickup_dropoff_route:e},t)))})]})})}),(0,o.jsxs)("tr",{children:[(0,o.jsxs)("td",{className:"px-4 py-3 text-sm border-t flex flex-row justify-start items-center gap-2",children:["Base price"," ",(0,o.jsx)(n.m_,{content:c.Fk,placement:"top",trigger:"click",children:(0,o.jsx)(i.u7w,{className:"text-yellow-500 hover:opacity-75"})})]}),(0,o.jsxs)("td",{className:"px-4 py-3 text-sm border-t",children:["R ",null===t||void 0===t?void 0:t.base_amount," "]})]}),(0,o.jsxs)("tr",{className:"border-b text-red-500",children:[(0,o.jsxs)("td",{className:"px-4 py-3 text-sm flex flex-row justify-start items-center gap-2",children:["Mid month discount"," ",(0,o.jsx)(n.m_,{content:c.Sv,placement:"top",trigger:"click",children:(0,o.jsx)(i.u7w,{className:"text-yellow-500 hover:opacity-75"})})]}),(0,o.jsxs)("td",{className:"px-4 py-3 text-sm",children:["- R ",null===t||void 0===t?void 0:t.mid_month_discount," "]})]}),(0,o.jsxs)("tr",{className:"border-b text-red-500 ",children:[(0,o.jsxs)("td",{className:"px-4 py-3 text-sm flex flex-row justify-start items-center gap-2",children:["Loyal customer discount",(0,o.jsx)(n.m_,{content:c.h1,placement:"top",trigger:"click",children:(0,o.jsx)(i.u7w,{className:"text-yellow-500 hover:opacity-75"})})]}),(0,o.jsxs)("td",{className:"px-4 py-3 text-sm",children:["- R ",null===t||void 0===t?void 0:t.loyal_customer_discount," "]})]}),(0,o.jsxs)("tr",{children:[(0,o.jsxs)("td",{className:"px-4 py-3 text-lg border-t font-extrabold flex flex-row justify-start items-center gap-2",children:["Amount due",(0,o.jsx)(n.m_,{content:c.S2,placement:"top",trigger:"click",children:(0,o.jsx)(i.u7w,{className:"text-yellow-500 hover:opacity-75 text-sm"})})]}),(0,o.jsxs)("td",{className:"px-4 py-3 text-lg border-t font-extrabold",children:["R ",null===t||void 0===t?void 0:t.amount_due_customer," "]})]})]})]})}function x(e){let{booking:t,...s}=e;return(0,o.jsxs)("div",{className:"rounded-md pb-6",children:[(0,o.jsxs)("h2",{className:(0,r.cn)("text-start text-slate-800 px-2 font-extrabold text-lg",{"text-red-500":null===t||void 0===t?void 0:t.booking_canceled,"text-gray-200":null===t||void 0===t?void 0:t.booking_completed}),children:[(null===t||void 0===t?void 0:t.id)>0&&(0,o.jsx)("div",{className:"pt-2"}),(null===t||void 0===t?void 0:t.id)>0&&(0,o.jsxs)("span",{children:["Invoice ",null===t||void 0===t?void 0:t.id]}),(null===t||void 0===t?void 0:t.booking_canceled)&&(0,o.jsx)("p",{className:"text-red-500 text-sm",children:"Booking canceled"}),(null===t||void 0===t?void 0:t.booking_completed)&&(0,o.jsx)("p",{className:"text-gray-200 text-sm",children:"Booking Completed"})]}),(0,o.jsx)(d,{booking:t}),s.children]})}},4732:(e,t,s)=>{s.d(t,{q:()=>i});var r=s(2122);const l={hidden:{opacity:0},visible:{opacity:1},exit:{opacity:0}};var o=s(607),a=s(579);function i(e){let{children:t,...s}=e;return(0,a.jsx)(r.P.section,{variants:l,animate:"visible",initial:"hidden",exit:"exit",transition:{duration:o.KD,delay:o.XP},children:t})}},5624:(e,t,s)=>{s.d(t,{q:()=>o});var r=s(2780),l=s(579);function o(e){let{secondary_text:t}=e;return(0,l.jsxs)("div",{className:"m-auto max-w-4xl flex flex-col justify-center items-center py-48 my-2 gap-4",children:[(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center gap-4",children:[(0,l.jsx)("span",{className:"text-3xl font-bold",children:"Please be patient"}),(0,l.jsx)("span",{className:"text-xl",children:t})]}),(0,l.jsx)(r.LW,{visible:!0,width:"40",height:"20",color:"#000"})]})}},6600:(e,t,s)=>{s.d(t,{X:()=>l});var r=s(4e3);function l(e){const{setItem:t,getItem:s,removeItem:l}=(0,r.M)(e);return{setCreateBookingObj:s=>{try{const r=window.localStorage.getItem(e);if(r){const e={...JSON.parse(r),...s};return void t(e)}t(s)}catch(r){}},getCreateBookingObj:s,removeCreatedBookingObj:l}}},7257:(e,t,s)=>{s.d(t,{Z:()=>l});var r=s(5043);function l(e,t){const s=(0,r.useRef)(e),l=(0,r.useRef)();(0,r.useEffect)((()=>{s.current=e}),[e]);return{set:(0,r.useCallback)((()=>{l.current=setTimeout((()=>s.current()),t)}),[t]),resetCallBack:e=>{l.current=setTimeout((()=>e()),t)}}}}}]);
//# sourceMappingURL=507.1aeb698f.chunk.js.map