"use strict";(self.webpackChunkmatols_website=self.webpackChunkmatols_website||[]).push([[507],{6507:(e,s,t)=>{t.r(s),t.d(s,{default:()=>j});var l=t(2907),r=t(6007),o=t(6600),a=t(3234),c=t(7613),n=t(5043),d=t(5624),i=t(7656),x=t(2820),m=t(2780),p=t(4703),u=t(7257),h=t(579);function j(){const{set:e}=(0,u.Z)((()=>window.location.href=p.C.bookings),5e3),{_:s,getCreateBookingObj:t}=(0,o.X)(a.r.create_booking),{isLoading:j,isSuccess:v,mutateAsync:y,isError:g,error:b}=(0,l.useMutation)({mutationKey:"book-booking",mutationFn:r.Gq,onSuccess:s=>{e()}}),{data:f,isLoading:N,mutate:k,isError:w,error:_}=(0,l.useMutation)({mutationKey:"compute-quote",mutationFn:r.aL});(0,n.useEffect)((()=>{const e=t();e&&k(e)}),[]);return w?(0,h.jsx)(c.$,{secondaryText:"".concat(_.response.data)}):N?(0,h.jsx)(d.q,{secondary_text:"Loading Quote"}):(0,h.jsxs)("main",{className:"max-w-xl mx-auto my-4 p-6 text-black bg-white",children:[(0,h.jsxs)("h2",{className:"text-start text-black pb-6 px-2 font-extrabold text-3xl",children:["Complete your booking",(0,h.jsx)("p",{className:"text-sm font-normal text-slate-600 pt-2",children:"Thank you for choosing Matols logistics services as your go to service provider."})]}),(0,h.jsx)(i.Y,{booking:f}),(0,h.jsxs)("div",{className:"flex flex-col gap-4 mt-6 justify-end items-end",children:[g&&(0,h.jsx)(c.$,{className:"w-full",secondaryText:"".concat(b.response.data.message," ").concat(b.message)}),v&&(0,h.jsx)(c.C,{className:"w-full",secondaryText:"Your booking was successfully created"}),(0,h.jsx)("div",{children:(0,h.jsx)(x.$,{onClick:async()=>{try{const e=t();e&&await y(e)}catch(e){}},className:"w-auto",children:j?(0,h.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:(0,h.jsx)(m.LW,{visible:!0,width:"40",height:"20",color:"#000"})}):"Book"})})]})]})}},7613:(e,s,t)=>{t.d(s,{$:()=>a,C:()=>o});t(5043);var l=t(4694),r=t(579);function o(e){let{secondaryText:s,className:t,children:o,...a}=e;return(0,r.jsx)("div",{...a,className:(0,l.cn)("bg-green-100 border-t-4 border-green-500 rounded-b-md text-green-900 px-4 py-2",t),role:"alert",children:(0,r.jsx)("div",{className:"flex text-wrap break-words",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-bold",children:"Yey ! all set"}),(0,r.jsx)("p",{className:"text-sm text-wrap break-words",children:s||"Welcome to Matols Logistics services"})]})})})}function a(e){let{secondaryText:s,className:t,children:o,...a}=e;return(0,r.jsx)("div",{...a,className:(0,l.cn)("bg-red-100 border-t-4 border-red-500 rounded-b-lg text-red-900 px-4 py-2",t),role:"alert",children:(0,r.jsx)("div",{className:"flex",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-bold",children:"Oops ! Error"}),(0,r.jsx)("p",{className:"text-sm",children:s||"An error occured"})]})})})}},7656:(e,s,t)=>{t.d(s,{Y:()=>i});var l=t(4694),r=t(579);function o(e){let{pickup_dropoff_route:s}=e;return(0,r.jsxs)("div",{className:"mb-3 border border-gray-200 p-2 rounded-md",children:[(0,r.jsxs)("p",{className:"text-sm font-bold",children:[s.primary_text,","," ",(0,r.jsx)("span",{className:"font-normal",children:s.secondary_text})]}),(0,r.jsx)("p",{className:"text-xs text-gray-400",children:s.route_detail})]})}var a=t(1462),c=t(4550),n=t(2129);function d(e){let{booking:s}=e;return(0,r.jsxs)("table",{className:"table-auto border border-gray-200  mt-6 w-full border-separate border-spacing-0 rounded-md",children:[(0,r.jsx)("thead",{className:(0,l.cn)("bg-yellow-400",{"bg-red-500":null===s||void 0===s?void 0:s.booking_canceled,"bg-gray-200":null===s||void 0===s?void 0:s.booking_completed}),children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"rounded-ss-md text-start px-4 py-3",children:"Description"}),(0,r.jsx)("th",{className:"rounded-tr-md text-start px-4 py-3",children:"Details"})]})}),(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-4 py-3 text-sm",children:"Booking date"}),(0,r.jsxs)("td",{className:"px-4 py-3 text-sm",children:[null===s||void 0===s?void 0:s.booking_date," "]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-4 py-3 text-sm",children:"Booking time"}),(0,r.jsxs)("td",{className:"px-4 py-3 text-sm",children:[null===s||void 0===s?void 0:s.booking_time," "]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-4 py-3 text-sm",children:"Vehicle type"}),(0,r.jsxs)("td",{className:"px-4 py-3 text-sm",children:[null===s||void 0===s?void 0:s.vehicle_type," Ton"]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-4 py-3 text-sm",children:"Helpers"}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm",children:null===s||void 0===s?void 0:s.helpers})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-4 py-3 text-sm",children:"Floors"}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm",children:null===s||void 0===s?void 0:s.floors})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-4 py-3 text-sm",children:"Payment option"}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm",children:null===s||void 0===s?void 0:s.payment_option})]}),(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:2,className:"px-4 py-3 text-sm border-t",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm font-bold",children:"Pick up and drop off locations"}),(0,r.jsx)("div",{className:"mt-2",children:null===s||void 0===s?void 0:s.pickup_dropoff_routes.map(((e,s)=>(0,r.jsx)(o,{pickup_dropoff_route:e},s)))})]})})}),(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:"px-4 py-3 text-sm border-t flex flex-row justify-start items-center gap-2",children:["Base price"," ",(0,r.jsx)(c.m_,{content:n.Fk,placement:"top",trigger:"click",children:(0,r.jsx)(a.u7w,{className:"text-yellow-500 hover:opacity-50"})})]}),(0,r.jsxs)("td",{className:"px-4 py-3 text-sm border-t",children:["R ",null===s||void 0===s?void 0:s.base_amount," "]})]}),(0,r.jsxs)("tr",{className:"border-b text-red-500",children:[(0,r.jsxs)("td",{className:"px-4 py-3 text-sm flex flex-row justify-start items-center gap-2",children:["Mid month discount"," ",(0,r.jsx)(c.m_,{content:n.Sv,placement:"top",trigger:"click",children:(0,r.jsx)(a.u7w,{className:"text-yellow-500 hover:opacity-50"})})]}),(0,r.jsxs)("td",{className:"px-4 py-3 text-sm",children:["- R ",null===s||void 0===s?void 0:s.mid_month_discount," "]})]}),(0,r.jsxs)("tr",{className:"border-b text-red-500 ",children:[(0,r.jsxs)("td",{className:"px-4 py-3 text-sm flex flex-row justify-start items-center gap-2",children:["Loyal customer discount",(0,r.jsx)(c.m_,{content:n.h1,placement:"top",trigger:"click",children:(0,r.jsx)(a.u7w,{className:"text-yellow-500 hover:opacity-50"})})]}),(0,r.jsxs)("td",{className:"px-4 py-3 text-sm",children:["- R ",null===s||void 0===s?void 0:s.loyal_customer_discount," "]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:"px-4 py-3 text-lg border-t font-extrabold flex flex-row justify-start items-center gap-2",children:["Amount due",(0,r.jsx)(c.m_,{content:n.S2,placement:"top",trigger:"click",children:(0,r.jsx)(a.u7w,{className:"text-yellow-500 hover:opacity-50 text-sm"})})]}),(0,r.jsxs)("td",{className:"px-4 py-3 text-lg border-t font-extrabold",children:["R ",null===s||void 0===s?void 0:s.amount_due_customer," "]})]})]})]})}function i(e){let{booking:s,...t}=e;return(0,r.jsxs)("div",{className:"rounded-lg pb-6",children:[(0,r.jsxs)("h2",{className:(0,l.cn)("text-start text-slate-800 px-2 font-extrabold text-lg",{"text-red-500":null===s||void 0===s?void 0:s.booking_canceled,"text-gray-200":null===s||void 0===s?void 0:s.booking_completed}),children:[(null===s||void 0===s?void 0:s.id)>0&&(0,r.jsx)("div",{className:"pt-2"}),(null===s||void 0===s?void 0:s.id)>0&&(0,r.jsxs)("span",{children:["Invoice ",null===s||void 0===s?void 0:s.id]}),(null===s||void 0===s?void 0:s.booking_canceled)&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:"Booking canceled"}),(null===s||void 0===s?void 0:s.booking_completed)&&(0,r.jsx)("p",{className:"text-gray-200 text-sm",children:"Booking Completed"})]}),(0,r.jsx)(d,{booking:s}),(0,r.jsx)("div",{className:"py-1"}),t.children]})}},5624:(e,s,t)=>{t.d(s,{q:()=>o});var l=t(2780),r=t(579);function o(e){let{secondary_text:s}=e;return(0,r.jsxs)("div",{className:"m-auto max-w-4xl flex flex-col justify-center items-center py-48 my-2 gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center gap-4",children:[(0,r.jsx)("span",{children:"Please be patient"}),(0,r.jsx)("span",{children:s})]}),(0,r.jsx)(l.LW,{visible:!0,width:"40",height:"20",color:"#000"})]})}},6600:(e,s,t)=>{t.d(s,{X:()=>r});var l=t(4e3);function r(e){const{setItem:s,getItem:t,removeItem:r}=(0,l.M)(e);return{setCreateBookingObj:t=>{try{const l=window.localStorage.getItem(e);if(l){const e={...JSON.parse(l),...t};return void s(e)}s(t)}catch(l){}},getCreateBookingObj:t,removeCreatedBookingObj:r}}},7257:(e,s,t)=>{t.d(s,{Z:()=>r});var l=t(5043);function r(e,s){const t=(0,l.useRef)(e),r=(0,l.useRef)();(0,l.useEffect)((()=>{t.current=e}),[e]);return{set:(0,l.useCallback)((()=>{r.current=setTimeout((()=>t.current()),s)}),[s]),resetCallBack:e=>{r.current=setTimeout((()=>e()),s)}}}}}]);
//# sourceMappingURL=507.2f3f12f4.chunk.js.map